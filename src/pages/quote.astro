---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="Request a Quote">
    <main>
        <section class="section">
            <div class="container contact-section-grid">
                <div class="service-content"> 
                    <h2>Let's Build Your Solution</h2>
                    <p>Every project is unique. By providing us with a few details about your goals and challenges, you enable our team to tailor a solution that perfectly fits your needs and budget.</p>
                    <div class="direct-contact" style="border-top: none; padding-top: 0; margin-top: 1rem;">
                        <h4>Our Process:</h4>
                        <ul class="features-list" style="margin-bottom: 0;">
                            <li>Initial Consultation & Needs Analysis</li>
                            <li>Detailed Proposal & Scope of Work</li>
                            <li>Project Kick-off & Implementation</li>
                            <li>Ongoing Support & Optimisation</li>
                        </ul>
                    </div>
                </div>
                <div class="contact-section-form">
                    <h3>Project Details</h3>
                    <form id="contact-page-form" action="https://api.web3forms.com/submit" method="POST">
                        <input type="hidden" name="access_key" value="e79fd123-332f-4645-b01b-ab2083a37bb9">
                        
                        <div class="form-group">
                            <label for="quote-name">Full Name*</label>
                            <input type="text" id="quote-name" name="name" required>
                        </div>
                         <div class="form-group">
                            <label for="quote-company">Company Name*</label>
                            <input type="text" id="quote-company" name="company" required>
                        </div>
                        <div class="form-group">
                            <label for="quote-email">Email Address*</label>
                            <input type="email" id="quote-email" name="email" required>
                        </div>
                         <div class="form-group">
                            <label for="quote-interest">Service of Interest*</label>
                            <select id="quote-interest" name="service" required>
                                <option value="" disabled selected>-- Please select a service --</option>
                                <option value="Cloud & Infrastructure">Cloud & Infrastructure</option>
                                <option value="Security & Compliance">Security & Compliance</option>
                                <option value="Process Automation (RPA)">Process Automation (RPA)</option>
                                <option value="Data & Analytics">Data & Analytics</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quote-message">Project Details*</label>
                            <textarea id="quote-message" name="message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="button secondary" style="width: 100%;">Submit Request</button>
                        <p class="form-status" id="quote-form-status"></p>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
           
            const quoteForm = document.getElementById('contact-page-form');
            
            if (quoteForm) {
                quoteForm.addEventListener('submit', async (e) => {
                   
                    e.preventDefault();
                    
                    const status = document.getElementById('quote-form-status');
                    const submitBtn = quoteForm.querySelector('button[type="submit"]');
                    const data = new FormData(e.target);

                    
                    status.textContent = "Sending your request...";
                    status.style.color = "#666";
                    submitBtn.disabled = true;
                    submitBtn.textContent = "Sending...";

                    try {
                        const response = await fetch(e.target.action, {
                            method: 'POST',
                            body: data,
                            headers: { 'Accept': 'application/json' }
                        });

                        if (response.ok) {
                           
                            status.textContent = "Thank you! We have received your request and will contact you shortly.";
                            status.style.color = '#20b082'; 
                            quoteForm.reset();
                        } else {
                           
                            status.textContent = 'Oops! There was a problem submitting your request. Please try again.';
                            status.style.color = '#e55649'; 
                        }
                    } catch (error) {
                        status.textContent = 'Oops! Connection error. Please check your internet and try again.';
                        status.style.color = '#e55649';
                    } finally {
                        
                        submitBtn.disabled = false;
                        submitBtn.textContent = "Submit Request";
                    }
                });
            }
        });
    </script>
</BaseLayout>
